datasource db {
  provider = "postgresql"
  url      = env("DB_TEST_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Document {
  id                String              @id @default(uuid())
  serial            Int                 @unique @default(autoincrement())
  cdnUrl            String
  createdAt         DateTime            @default(now())
  fileName          String
  fileSize          Int
  localPath         String
  mimeType          String
  ownerId           String
  owner             DocumentOwner
  status            DocumentStatus      @default(PENDING)
  type              DocumentType
  updatedAt         DateTime            @updatedAt
}

// Document Statuses
enum DocumentStatus {
  APPROVED
  PENDING
  REJECTED
}

// Document owner type
enum DocumentOwner {
  USER
  LISTING
  VERIFICATION
}
 // Document type
enum DocumentType {
  IMAGE
  DOCX
  PDF
  VIDEO
}

model User {
  id                String              @id @default(uuid())
  serial            Int                 @unique @default(autoincrement())
  avatar            Document?           @relation(fields: [avatarId], references: [id])
  avatarId          String?
  chatRooms         ChatRoom[]
  createdAt         DateTime            @default(now())
  email             String              @unique
  firstName         String
  lastName          String
  isVerified        Boolean             @default(false)
  landlords         Landlord[]
  likes             Like[]
  listings          []
  messages          Message[]
  passwordHash      String
  passwordSalt      String
  phone             String
  recommendations   Recommendation[]
  rentals           Rental[]
  reviews           Review[]
  role              UserRole            @default(USER)
  updatedAt         DateTime            @updatedAt
}


// User roles
enum UserRole {
  ADMIN
  AGENT
  LANDLORD
  USER
}
